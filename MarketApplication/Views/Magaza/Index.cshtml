@model List<Magaza>
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
    List<MagazaKategori> mKategoriler = ViewBag.MagazaKategoriler;


    
}

<!-- Breadcrumb Section Begin -->
<section class="breadcrumb-section set-bg" data-setbg="/assets/img/breadcrumb.jpg">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 text-center">
                <div class="breadcrumb__text">
                    <h2>Mağaza</h2>
                    <div class="breadcrumb__option">
                        <a href="./index.html">Home</a>
                        <span>Mağaza</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Breadcrumb Section End -->
<!-- Product Section Begin -->
<section class="product spad">
    <div class="container">
        <div class="row">
            <div class="col-lg-3 col-md-5">
                <div class="sidebar">


                    <div class="sidebar__item">
                        <h4>Price</h4>
                        <div class="price-range-wrap">
                            <div class="price-range ui-slider ui-corner-all ui-slider-horizontal ui-widget ui-widget-content"
                                 data-min="10" data-max="540">
                                <div class="ui-slider-range ui-corner-all ui-widget-header"></div>
                                <span tabindex="0" class="ui-slider-handle ui-corner-all ui-state-default"></span>
                                <span tabindex="0" class="ui-slider-handle ui-corner-all ui-state-default"></span>
                            </div>
                            <div class="range-slider">
                                <div class="price-input">
                                    <input type="text" id="minamount">
                                    <input type="text" id="maxamount">
                                </div>
                            </div>
                        </div>
                    </div>


                </div>
            </div>
            <div class="col-lg-9 col-md-7">
                <div class="filter__item">
                    <div class="row">
                        <div class="col-lg-4 col-md-5">
                            <div class="filter__sort">
                                <span>Sırala</span>
                                <select name="MagazaKategoriId">
                                    <option value="0">Kategori seçin</option>
                                    @foreach (var item in mKategoriler)
                                    {
                                        <option value="@item.MagazaKategoriId">@item.Ad</option>
                                    }
                                </select>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-4">
                            <div class="filter__found">
                                <h6><span>@Model.Count</span>Mağaza Bulundu</h6>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-3">
                            <div class="filter__option">
                                <span class="icon_grid-2x2"></span>
                                <span class="icon_ul"></span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    @foreach (var item in Model)
                    {
                        var toplam = 0.0;
                        foreach (var y in item.Yorumlar)
                        {
                            toplam += Convert.ToDouble(y.Rate);
                        }

                        var ortalama = (toplam / item.Yorumlar.Count()).ToString("n1");
                        <div class="col-lg-4 col-md-6 col-sm-6">
                            <div class="product__item">
                                <div class="product__item__pic set-bg" data-setbg="@item.KapakGorsel">

                                </div>
                                <div class="product__item__text">
                                    <h6><a href="/Magaza/detay?magazaId=@item.MagazaId">@item.Ad  </a></h6>
                                    <h6>@ortalama ★</h6>
                                    <h6>min. ₺@item.MinimumFiyat</h6>
                                </div>
                            </div>
                        </div>

                      
                        
                    }                    
                </div>

            </div>
        </div>
    </div>
</section>
<!-- Product Section End -->